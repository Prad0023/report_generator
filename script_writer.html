<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hinglish Script Generator - AI Powered</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            max-width: 900px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: #5a67d8;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #718096;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .api-section {
            background: #f7fafc;
            border: 2px dashed #cbd5e0;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .api-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .api-title {
            color: #4a5568;
            font-weight: 600;
            font-size: 1.2em;
        }

        .ai-badge {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            color: #4a5568;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        select, input, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }

        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .api-row {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 15px;
            align-items: end;
        }

        .toggle-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: #e2e8f0;
            border-radius: 30px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .toggle-switch.active {
            background: #667eea;
        }

        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(30px);
        }

        .generate-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            display: block;
            margin: 30px auto;
            position: relative;
            overflow: hidden;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .generate-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            color: #667eea;
            margin: 20px 0;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .output-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e2e8f0;
            display: none;
        }

        .output-section.show {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .script-output {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 25px;
            font-size: 1.1em;
            line-height: 1.8;
            color: #2d3748;
            white-space: pre-wrap;
        }

        .copy-btn {
            background: #48bb78;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 15px;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .copy-btn:hover {
            background: #38a169;
            transform: translateY(-1px);
        }

        .error-message {
            background: #fed7d7;
            color: #c53030;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        .info-box {
            background: #e6fffa;
            border: 1px solid #81e6d9;
            color: #234e52;
            padding: 12px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .emoji {
            font-size: 1.2em;
            margin: 0 5px;
        }

        @media (max-width: 600px) {
            .row, .api-row {
                grid-template-columns: 1fr;
            }
            h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Hinglish Script Generator <span class="emoji">✨</span></h1>
        <p class="subtitle">AI-Powered natural Hinglish script generation!</p>

        <!-- API Configuration Section -->
        <div class="api-section">
            <div class="api-header">
                <h3 class="api-title">AI Configuration <span class="emoji">🤖</span></h3>
                <span class="ai-badge">AI POWERED</span>
            </div>
            
            <div class="toggle-container">
                <label style="margin-bottom: 0;">Use AI Generation:</label>
                <div class="toggle-switch" id="aiToggle">
                    <div class="toggle-slider"></div>
                </div>
                <span id="aiStatus" style="color: #718096;">Off (Using Templates)</span>
            </div>

            <div id="apiConfig" style="display: none;">
                <div class="api-row">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label for="aiProvider">AI Provider</label>
                        <select id="aiProvider">
                            <option value="gemini">Google Gemini</option>
                            <option value="groq">Groq (Llama/Mixtral)</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label for="apiKey">API Key</label>
                        <input type="password" id="apiKey" placeholder="Enter your API key...">
                    </div>
                </div>
                
                <div class="info-box">
                    <strong>How to get API keys:</strong><br>
                    <strong>Gemini:</strong> Visit <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a> to get your free API key<br>
                    <strong>Groq:</strong> Visit <a href="https://console.groq.com/keys" target="_blank">Groq Console</a> to get your free API key
                </div>
            </div>
        </div>

        <form id="scriptForm">
            <div class="form-group">
                <label for="purpose">Purpose <span class="emoji">🎯</span></label>
                <select id="purpose" required>
                    <option value="">Select purpose...</option>
                    <option value="youtube">YouTube Video</option>
                    <option value="instagram">Instagram Reel/Post</option>
                    <option value="podcast">Podcast Episode</option>
                    <option value="shortfilm">Short Film/Web Series</option>
                    <option value="standup">Stand-up Comedy</option>
                    <option value="commercial">Advertisement/Commercial</option>
                    <option value="educational">Educational Content</option>
                    <option value="vlog">Vlog/Personal Story</option>
                </select>
            </div>

            <div class="row">
                <div class="form-group">
                    <label for="style">Style (Optional) <span class="emoji">🎨</span></label>
                    <select id="style">
                        <option value="">Auto-select style</option>
                        <option value="casual">Casual/Friendly</option>
                        <option value="funny">Funny/Comedy</option>
                        <option value="emotional">Emotional/Heartfelt</option>
                        <option value="energetic">Energetic/Enthusiastic</option>
                        <option value="professional">Professional/Corporate</option>
                        <option value="dramatic">Dramatic/Intense</option>
                        <option value="sarcastic">Sarcastic/Witty</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="conversation">Conversation Type <span class="emoji">💬</span></label>
                    <select id="conversation" required>
                        <option value="">Select type...</option>
                        <option value="monologue">Monologue (Single Person)</option>
                        <option value="dialogue">Dialogue (2 People)</option>
                        <option value="group">Group Discussion (3+ People)</option>
                        <option value="interview">Interview Format</option>
                        <option value="narration">Narration/Voice Over</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="form-group">
                    <label for="duration">Duration <span class="emoji">⏱️</span></label>
                    <select id="duration" required>
                        <option value="">Select duration...</option>
                        <option value="30sec">30 seconds</option>
                        <option value="1min">1 minute</option>
                        <option value="3min">3 minutes</option>
                        <option value="5min">5 minutes</option>
                        <option value="10min">10+ minutes</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="audience">Target Audience <span class="emoji">👥</span></label>
                    <select id="audience" required>
                        <option value="">Select audience...</option>
                        <option value="genz">Gen Z (18-25)</option>
                        <option value="millennials">Millennials (25-40)</option>
                        <option value="general">General Audience</option>
                        <option value="corporate">Corporate/Professional</option>
                        <option value="students">Students</option>
                        <option value="family">Family Friendly</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="topic">Topic/Theme <span class="emoji">📝</span></label>
                <input type="text" id="topic" placeholder="E.g., Morning routine, Office life, Dating advice..." required>
            </div>

            <div class="form-group">
                <label for="additional">Additional Instructions (Optional) <span class="emoji">💡</span></label>
                <textarea id="additional" placeholder="Any specific requirements, character names, locations, special phrases you want to include..."></textarea>
            </div>

            <button type="submit" class="generate-btn" id="generateBtn">Generate Script <span class="emoji">🚀</span></button>
        </form>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="margin-top: 15px;">AI is crafting your perfect script...</p>
        </div>

        <div class="error-message" id="errorMessage"></div>

        <div id="outputSection" class="output-section">
            <h2 style="color: #5a67d8; margin-bottom: 20px;">Your Generated Script <span class="emoji">🎬</span></h2>
            <div id="scriptOutput" class="script-output"></div>
            <button class="copy-btn" onclick="copyScript()">Copy Script <span class="emoji">📋</span></button>
        </div>
    </div>

    <script>
        // Toggle AI mode
        const aiToggle = document.getElementById('aiToggle');
        const apiConfig = document.getElementById('apiConfig');
        const aiStatus = document.getElementById('aiStatus');
        let useAI = false;

        aiToggle.addEventListener('click', function() {
            useAI = !useAI;
            aiToggle.classList.toggle('active');
            apiConfig.style.display = useAI ? 'block' : 'none';
            aiStatus.textContent = useAI ? 'On (AI Generation)' : 'Off (Using Templates)';
        });

        // Form submission
        document.getElementById('scriptForm').addEventListener('submit', function(e) {
            e.preventDefault();
            generateScript();
        });

        async function generateScript() {
            const generateBtn = document.getElementById('generateBtn');
            const loading = document.getElementById('loading');
            const errorMessage = document.getElementById('errorMessage');
            
            // Reset error message
            errorMessage.classList.remove('show');
            
            // Get form values
            const purpose = document.getElementById('purpose').value;
            const style = document.getElementById('style').value || 'casual';
            const conversation = document.getElementById('conversation').value;
            const duration = document.getElementById('duration').value;
            const audience = document.getElementById('audience').value;
            const topic = document.getElementById('topic').value;
            const additional = document.getElementById('additional').value;

            if (useAI) {
                const apiKey = document.getElementById('apiKey').value;
                const provider = document.getElementById('aiProvider').value;
                
                if (!apiKey) {
                    showError('Please enter your API key to use AI generation.');
                    return;
                }

                // Show loading
                generateBtn.disabled = true;
                loading.classList.add('show');

                try {
                    const script = await generateAIScript(provider, apiKey, {
                        purpose, style, conversation, duration, audience, topic, additional
                    });
                    
                    displayScript(script);
                } catch (error) {
                    showError('Error generating script: ' + error.message);
                } finally {
                    generateBtn.disabled = false;
                    loading.classList.remove('show');
                }
            } else {
                // Use template-based generation
                const script = generateTemplateScript(purpose, style, conversation, duration, audience, topic, additional);
                displayScript(script);
            }
        }

        async function generateAIScript(provider, apiKey, params) {
            const prompt = createPrompt(params);
            
            let script;
            if (provider === 'gemini') {
                script = await callGeminiAPI(apiKey, prompt);
            } else if (provider === 'groq') {
                script = await callGroqAPI(apiKey, prompt);
            }
            
            // Check if the script is actually Hinglish
            if (!isHinglish(script)) {
                // If not enough Hinglish, try again with a stronger prompt
                const strongerPrompt = prompt + "\n\nIMPORTANT: The previous attempt was too English. This time, ensure EVERY sentence has Hindi words. Example: 'Bhai, ye idea toh ekdum solid hai!' not 'This idea is solid!'";
                
                if (provider === 'gemini') {
                    script = await callGeminiAPI(apiKey, strongerPrompt);
                } else if (provider === 'groq') {
                    script = await callGroqAPI(apiKey, strongerPrompt);
                }
            }
            
            return script;
        }

        function isHinglish(text) {
            // Check if text contains enough Hindi words
            const hindiWords = ['hai', 'hain', 'ka', 'ki', 'ke', 'ye', 'wo', 'kya', 'kyun', 'kaise', 'kab', 'yaar', 'bhai', 'toh', 'nahi', 'haan', 'achha', 'theek', 'matlab', 'bas', 'abhi', 'phir', 'lekin', 'aur', 'arre', 'beta', 'dost', 'mein', 'main', 'tum', 'aap', 'tera', 'mera'];
            
            const words = text.toLowerCase().split(/\s+/);
            const hindiWordCount = words.filter(word => hindiWords.some(hw => word.includes(hw))).length;
            
            // If less than 20% Hindi words, it's too English
            return (hindiWordCount / words.length) > 0.2;
        }

        function createPrompt(params) {
            return `Create a HINGLISH script (50% Hindi + 50% English mixed naturally) with these specifications:
            
Purpose: ${params.purpose}
Style: ${params.style}  
Type: ${params.conversation}
Duration: ${params.duration}
Audience: ${params.audience}
Topic: ${params.topic}
${params.additional ? `Additional notes: ${params.additional}` : ''}

CRITICAL REQUIREMENTS FOR HINGLISH:
1. MUST mix Hindi and English in EVERY sentence naturally - like "Yaar, ye phone ka camera toh kaafi amazing hai!"
2. Use common Hindi words like: yaar, bhai, kya, hai, toh, nahi, achha, theek, matlab, bas, abhi, phir, lekin, aur, etc.
3. Natural code-switching like urban Indians: "Main kal shopping karne gaya tha" or "Ye idea toh ekdum mast hai!"
4. Include Hindi expressions: "Arre yaar", "Kya baat hai", "Chal na", "Pakka?", "Sahi mein?", "Mazak kar raha hai kya?"
5. Use Hindi slang appropriate for ${params.audience}: "scene kya hai", "fundae clear hai", "full on mood", "bahut hard"
6. DO NOT write pure English sentences. Every sentence should have Hindi words mixed naturally.
7. Make it sound like how people actually speak in Delhi/Mumbai, not like a translation.

Examples of good Hinglish:
- "Bro, kal ka plan set hai ya abhi bhi confusion chal raha hai?"
- "Yaar, mujhe toh ye product ekdum killer lagta hai, full paisa vasool!"
- "Arre, tune wo new cafe try kiya? Unka coffee toh next level hai!"

Generate a complete ${params.duration} script in this natural Hinglish style.`;
        }

        async function callGeminiAPI(apiKey, prompt) {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro-preview-05-06:generateContent?key=${apiKey}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    contents: [{
                        parts: [{
                            text: prompt
                        }]
                    }],
                    generationConfig: {
                        temperature: 0.9,
                        topK: 40,
                        topP: 0.95,
                    }
                })
            });

            if (!response.ok) {
                throw new Error('Gemini API error: ' + response.statusText);
            }

            const data = await response.json();
            return data.candidates[0].content.parts[0].text;
        }

        async function callGroqAPI(apiKey, prompt) {
            const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    model: "meta-llama/llama-4-scout-17b-16e-instruct", // You can change this to other Groq models
                    messages: [{
                        role: "system",
                        content: "You are an expert at writing natural Hinglish scripts. Always mix Hindi and English in every sentence naturally, like how urban Indians actually speak."
                    }, {
                        role: "user",
                        content: prompt
                    }],
                    temperature: 0.9,
                    max_tokens: 2000,
                    top_p: 0.95
                })
            });

            if (!response.ok) {
                throw new Error('Groq API error: ' + response.statusText);
            }

            const data = await response.json();
            return data.choices[0].message.content;
        }

        function generateTemplateScript(purpose, style, conversation, duration, audience, topic, additional) {
            // Original template-based generation logic
            let script = "";
            
            const openings = {
                youtube: {
                    casual: `Namaste doston! Aaj hum baat karenge ${topic} ke baare mein. Trust me, ye video aapko bahut pasand aayega!\n\n`,
                    funny: `Kya bolti public! Ready ho comedy ke liye? Aaj ka topic hai ${topic}, aur main guarantee deta hun ki aap hasenge zarur!\n\n`,
                    emotional: `Hello everyone. Aaj main share karunga ek bahut personal story ${topic} ke baare mein. I hope ye aapko inspire karegi.\n\n`
                },
                instagram: {
                    energetic: `Stop! Ruko! Ye reel save kar lo RIGHT NOW! ${topic} pe main batane wala hun kuch aisa jo...\n\n`,
                    casual: `Hey guys! Quick tip about ${topic}. Swipe karne se pehle sun lo...\n\n`
                },
                podcast: {
                    professional: `Welcome to today's episode. Aaj hum discuss karenge ${topic}. It's going to be very insightful.\n\n`,
                    casual: `What's up listeners! Aaj ka episode bahut interesting hai - ${topic}. Toh chalo shuru karte hain...\n\n`
                }
            };

            const purposeOpenings = openings[purpose] || openings.youtube;
            const selectedOpening = purposeOpenings[style] || purposeOpenings.casual || `Hello! Aaj hum baat karenge ${topic} ke baare mein.\n\n`;
            script += selectedOpening;

            // Generate main content based on conversation type
            if (conversation === 'monologue') {
                script += `Main batata hun aapko about ${topic}. See, problem ye hai ki log isko seriously nahi lete. But main aapko practically explain karta hun.\n\nFor example, agar aap ye karte ho, toh result aisa hoga. Simple hai na?\n\nMain personally isko follow karta hun aur trust me, it works!`;
            } else if (conversation === 'dialogue') {
                script += `Person A: Bro, ${topic} pe teri kya ray hai?\nPerson B: Honestly? Bahut confusing hai yaar.\nPerson A: Same! Main bhi yahi soch raha tha.\nPerson B: But ek cheez toh hai, we can't ignore it anymore.\nPerson A: Exactly! Kuch toh karna padega.\nPerson B: Chal, let's figure this out together.`;
            }

            if (additional) {
                script += `\n\n[Note: ${additional}]`;
            }

            // Add ending
            const endings = {
                youtube: "\n\nToh doston, agar ye video pasand aaya ho toh like karna mat bhulna! Subscribe kar do agar naya ho, aur bell icon daba do. Milte hain next video mein. Tab tak ke liye, bye!",
                instagram: "\n\nSave kar lo for later! Follow for more such content! ❤️",
                podcast: "\n\nThat's all for today's episode. Agar pasand aaya ho toh please rate and review karna. Until next time, keep growing!",
                default: "\n\nThank you so much for your time. Stay tuned for more!"
            };
            
            script += endings[purpose] || endings.default;
            
            return script;
        }

        function displayScript(script) {
            document.getElementById('scriptOutput').textContent = script;
            document.getElementById('outputSection').classList.add('show');
            document.getElementById('outputSection').scrollIntoView({ behavior: 'smooth' });
        }

        function showError(message) {
            const errorElement = document.getElementById('errorMessage');
            errorElement.textContent = message;
            errorElement.classList.add('show');
            setTimeout(() => {
                errorElement.classList.remove('show');
            }, 5000);
        }

        function copyScript() {
            const scriptText = document.getElementById('scriptOutput').textContent;
            navigator.clipboard.writeText(scriptText).then(() => {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.innerHTML;
                btn.innerHTML = 'Copied! <span class="emoji">✅</span>';
                
                setTimeout(() => {
                    btn.innerHTML = originalText;
                }, 2000);
            });
        }
    </script>
</body>
</html>